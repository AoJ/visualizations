<!DOCTYPE html>
<html lang="en">
<head>
  <title>101st Congress Votes</title>
  <script type="text/javascript" src="../lib/jquery.js"></script>
  <script type="text/javascript" src="../lib/underscore.js"></script>
  <script type="text/javascript" src="../lib/backbone.js"></script>
  <script type="text/javascript" src="js/heatmap.js"></script>
  <link rel="stylesheet" href="style.css" type="text/css" />
</head>
<body>
<div id="topbar">
  <div id="options">
    <label for="year">Year:</label>
    <select id="yearSelect">
      <option value="1990">1990</option>
      <option value="1991">1991</option>
      <option value="1992">1992</option>
      <option value="1993">1993</option>
      <option value="1994">1994</option>
      <option value="1995">1995</option>
      <option value="1996">1996</option>
      <option value="1997">1997</option>
      <option value="1998">1998</option>
      <option value="1999">1999</option>
      <option value="2000">2000</option>
      <option value="2001">2001</option>
      <option value="2002">2002</option>
      <option value="2003">2003</option>
      <option value="2004">2004</option>
      <option value="2005">2005</option>
      <option value="2006">2006</option>
      <option value="2007">2007</option>
      <option value="2008">2008</option>
      <option value="2009">2009</option>
      <option value="2010">2010</option>
      <option value="2011">2011</option>
    </select>
    <label for="resolution">Resolution:</label>
    <select id="resolution">
      <option value="1">1</option>
      <option value="2">2</option>
      <option value="4" selected="selected">4</option>
      <option value="8">8</option>
      <option value="12">12</option>
      <option value="20">20</option>
    </select>
  </div>
  <h1>Congress Votes <span class="date"></span></h1>
  <p>
  This is a visualization of the <a id="roll-link" href="http://clerk.house.gov/evs/1990/index.asp">roll call votes of <span class="date">1990</span> Congress</a>.<br/>
    Each row is a legislator. Each column is a roll call vote. Click to sort by column. A description for each roll will be in the next version.
  </p>
  <p>
    Key:
    <strong>
      <span class="color1">Yea</span> |
      <span class="color0">Nay</span> |
      <span class="color4">Present</span> |
      <span class="color3">Not Voting</span> |
      <span class="color5">Not in Congress at the time</a>
    </strong>
  </p>
</div>
<div id="stats">
  <ul>
    <li>
      <strong>Legislator</strong>:
      <span id="legislator">n/a</span>
    </li>
    <li>
      <strong>Roll</strong>:
      <span id="j">n/a</span>
    </li>
    <li>
      <strong>Vote</strong>:
      <span id="val">n/a</span>
    </li>
  </ul>
</div>
<h2 id="loading">Loading <span class="date"></span>  US House Votes...</h2>
<div id="heatmap-wrap">
  <canvas id="heatmap" height=300 width=900></canvas>
</div>
<script type="text/javascript" src="js/init.js"></script>
<script>
var resolution = parseInt($('#resolution').val());

function render() {
  var val = $('#yearSelect').val();
  $('.date').each(function() {
    $(this).text(val);
  });

  $('#roll-link').attr('href', "http://clerk.house.gov/evs/" + val + "/index.asp");

  var options = {};


  options.size = _.extend({
    dotsize: resolution,
    gutsize: resolution < 4 ? 0.00001 : 1
  }, options);

  if (val == 2011) {
    _.extend({
      year:val,
      colors:{
        "Boehner":"#0b0",
        "Pelosi":"#e30"
      },
      vote_key:{
        "Boehner":"Boehner",
        "Pelosi":"Pelosi"
      }
    }, options);
  } else {
    _.extend({
      year:val 
    }, options);
  }

  initHeat(options);
};

render();

$('#yearSelect').change(function() {
  $('#heatmap-wrap').hide();
  $('#loading').show();
  render();  
});

$('#resolution').change(function() {
  resolution = parseInt($('#resolution').val());
  $(options.mapEl).hide();
  render();
});  
</script>
</body>
</html>
